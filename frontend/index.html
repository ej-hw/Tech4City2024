<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script type="text/javascript" src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="styles.css" />
    <title>Judy</title>
  </head>

  <body class="flex h-screen">
    <form id="chat-form" class="flex w-full flex-col border-r">
      <header class="flex flex-col gap-2 p-4">
        <h3 class="text-xl font-semibold leading-tight tracking-tight">
          Judy: A chatbot who knows when to shut up.
        </h3>

        <p class="text-sm text-zinc-500">
          The problem with most teaching chatbots is they usurp the learning
          experience and keeps replying. This is a proof-of-concept of a chatbot
          with analysis features to determine when it should stop replying and
          fall back to a human.
        </p>
      </header>

      <div class="flex h-full flex-col gap-4 px-4">
        <button
          class="disabled:opacity-50 disabled:pointer-events-none w-fit bottom-4 right-2 inline-flex items-center rounded-full border px-3 py-1 text-sm font-medium focus-within:ring hover:bg-black/5"
          type="button"
          id="generate-seed-button"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="mr-2 size-4"
          >
            <path
              d="M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"
            />
          </svg>

          <span>Generate something to talk about</span>
        </button>

        <template id="seed-template">
          <div
            class="shrink-0 max-h-[30vh] overflow-y-scroll py-3 px-4 rounded-2xl border"
          >
            <p class="text-zinc-500" id="seed"></p>
          </div>
        </template>

        <textarea
          autofocus
          id="message-input"
          name="message"
          placeholder="Start typing a message here for Judy to evaluate its sentiment..."
          class="h-full resize-none py-3 px-4 outline-none rounded-2xl bg-zinc-50 focus-within:bg-white border focus-within:border-zinc-300 focus-within:shadow-sm"
        ></textarea>
      </div>

      <section class="flex justify-between p-4">
        <div></div>

        <div class="flex items-center">
          <p class="mr-2 text-sm text-zinc-500">Shift+Enter or</p>

          <button
            id="submit-button"
            class="inline-flex items-center rounded-full bg-black px-4 py-2 text-sm font-medium text-white focus-within:ring disabled:pointer-events-none hover:bg-black/90 disabled:opacity-50"
            type="submit"
            disabled
            aria-disabled="true"
          >
            <span>Evaluate sentiment</span>

            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="ml-2 size-4"
            >
              <path d="M5 12h14" />
              <path d="m12 5 7 7-7 7" />
            </svg>
          </button>
        </div>
      </section>
    </form>

    <section
      id="analysis-container"
      class="flex w-[30rem] flex-col gap-8 border-r p-4 overflow-y-scroll"
    >
      <div>
        <p class="text-xs text-zinc-500">
          Judy's analyses are powered by open-source natural language processing
          (NLP) models and may be inaccurate.
        </p>
      </div>

      <section class="flex flex-col gap-2">
        <p class="text-xl font-semibold leading-tight tracking-tight">
          Sentiments
        </p>

        <template id="sentiment-template">
          <div class="flex items-end justify-between">
            <div>
              <p class="sentiment-name text-sm text-zinc-500">Polarity</p>
              <p class="sentiment-label font-medium">Positive</p>
            </div>

            <p class="sentiment-score text-zinc-500">20%</p>
          </div>
        </template>

        <div id="sentiments-list" class="flex flex-col gap-4">
          <p class="text-zinc-500 text-sm">
            Sentiment analyses of emotion, offensiveness, intent, and mental
            state will appear here.
          </p>
        </div>
      </section>

      <section class="flex flex-col gap-2">
        <p class="text-xl font-semibold leading-tight tracking-tight">
          Generated reply
        </p>

        <template id="fallback-template">
          <section
            class="flex flex-col gap-2 rounded-xl border border-amber-500/20 bg-amber-500/10 p-4"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="size-8 text-amber-500"
            >
              <path d="M13.67 8H18a2 2 0 0 1 2 2v4.33" />
              <path d="M2 14h2" />
              <path d="M20 14h2" />
              <path d="M22 22 2 2" />
              <path
                d="M8 8H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 1.414-.586"
              />
              <path d="M9 13v2" />
              <path d="M9.67 4H12v2.33" />
            </svg>

            <h3 class="text-xl font-semibold leading-tight tracking-tight">
              Needs human intervention
            </h3>

            <p class="text-sm text-zinc-500">
              Based on this message, Judy shouldn't continue generating replies.
            </p>
          </section>
        </template>

        <template id="loader-template">
          <div class="flex gap-2 text-zinc-500 items-center">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="animate-spin size-4"
            >
              <path d="M21 12a9 9 0 1 1-6.219-8.56" />
            </svg>

            <p class="text-sm">Generating something...</p>
          </div>
        </template>

        <template id="response-template">
          <p></p>
        </template>

        <div id="response">
          <p class="text-zinc-500 text-sm">
            Judy's response to the message will appear here.
          </p>
        </div>
      </section>
    </section>

    <section
      class="flex w-[30rem] flex-col overflow-hidden p-4 overflow-y-scroll"
    >
      <p class="text-xl font-semibold leading-tight tracking-tight">History</p>

      <template id="history-item-template">
        <div class="history-item -mx-4 flex flex-col gap-2 border-b p-4">
          <p class="history-item-timestamp text-xs text-zinc-500"></p>

          <div class="flex flex-col gap-2 text-sm">
            <p class="history-item-seed line-clamp-2 text-zinc-500"></p>

            <div class="flex gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="mt-0.5 size-4 shrink-0"
              >
                <path d="M7.9 20A9 9 0 1 0 4 16.1L2 22Z" />
              </svg>

              <p class="history-item-message line-clamp-2"></p>
            </div>

            <div class="flex gap-2">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="bot-icon mt-0.5 size-4 shrink-0"
              >
                <path d="M12 8V4H8" />
                <rect width="16" height="12" x="4" y="8" rx="2" />
                <path d="M2 14h2" />
                <path d="M20 14h2" />
                <path d="M15 13v2" />
                <path d="M9 13v2" />
              </svg>

              <p class="history-item-reply line-clamp-2"></p>
            </div>
          </div>

          <div class="mt-1 flex items-center justify-between">
            <button
              class="history-item-restore inline-flex items-center rounded-full border px-3 py-1 text-sm font-medium focus-within:ring hover:bg-black/5"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="mr-2 size-4"
              >
                <path d="m12 19-7-7 7-7" />
                <path d="M19 12H5" />
              </svg>

              <span>Restore</span>
            </button>

            <button
              class="history-item-delete text-red-500 hover:text-red-500/80"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="size-4"
              >
                <path d="M3 6h18" />
                <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6" />
                <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2" />
              </svg>
            </button>
          </div>
        </div>
      </template>

      <div id="history-list" class="flex flex-col-reverse"></div>
    </section>

    <template id="bot-off-icon">
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
      >
        <path d="M13.67 8H18a2 2 0 0 1 2 2v4.33" />
        <path d="M2 14h2" />
        <path d="M20 14h2" />
        <path d="M22 22 2 2" />
        <path
          d="M8 8H6a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h12a2 2 0 0 0 1.414-.586"
        />
        <path d="M9 13v2" />
        <path d="M9.67 4H12v2.33" />
      </svg>
    </template>

    <template id="error-dialog-template">
      <dialog
        class="bottom-4 left-[unset] right-4 m-0 flex w-[20rem] flex-col gap-1 rounded-xl bg-red-600 p-5 text-white shadow-lg"
        open
      >
        <p class="text-sm font-semibold">Something went wrong</p>

        <p class="text-sm opacity-90">
          Either the server is uncontactable or an error occurred somewhere.
        </p>

        <button
          class="absolute right-4 top-4 opacity-80 hover:opacity-60"
          type="button"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="24"
            height="24"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round"
            class="size-4"
          >
            <path d="M18 6 6 18"></path>
            <path d="m6 6 12 12"></path>
          </svg>
        </button>
      </dialog>
    </template>

    <template id="empty-history-template">
      <p id="empty-history" class="text-sm text-zinc-500 mt-2">
        Your past analysis results will appear here.
      </p>
    </template>

    <div id="toasts"></div>

    <script src="script.js"></script>
  </body>
</html>
